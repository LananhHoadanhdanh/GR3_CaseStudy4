<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body {
            background-size: cover;
        }

        table {
            border-collapse: collapse;
            border: 1px solid;
        }

        td, tr, th {
            border: 1px solid;
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function findAll() {
            $.ajax({
                type: "Get",
                url: "http://localhost:8080/songs",
                success: function (songs) {
                    console.log(songs)
                    display(songs.content)
                },
                error: function (error) {
                    alert("ảo")
                }
            })
        }

        function showCreate() {
            let str = `<form enctype="multipart/form-data"><input type="text" id="name">  <br>
    <input type="text" id="description">
   <br>
    <input type="text" id="lyrics">  <br>
    <input type="number" id="singer">  <br>
    <input type="number" id="user">  <br>

    <div>
        <label>Image</label>
       <input id="fileupload" type="file" name="fileupload" />
    </div>
 <button onclick="createSong()"> thêm</button></form>`
            document.getElementById("res").innerHTML = str
        }

        async function createSong() {
            let formData = new FormData();
            formData.append("file", fileupload.files[0]);
            let song = {
                name: document.getElementById("name").value,
                description: document.getElementById("description").value,
                singer: document.getElementById("singer").value,
                user: document.getElementById("user").value,
                lyrics: document.getElementById("lyrics").value,
            }
            console.log(song)
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "POST",
                url: "http://localhost:8080/songs",
                data: JSON.stringify(song),
                success: function (song) {
                    console.log(song)
                },
                error: function (error) {
                    alert("mẹ")
                }
            })
        }

        function display(songs) {
            let str = "";
            for (let i = 0; i < songs.length; i++) {
                str +=
                    ` <img src="../static/img/${songs[i].image}" height="150"width="150"/><p>${songs[i].name}</p>`
            }
            document.getElementById("res").innerHTML = str
        }


    </script>


</head>
<body>
<center>

    <!--    <button onclick="findAll()">-->
    <!--        Show List-->
    <!--    </button>-->
    <button onclick="showCreate()">create</button>

</center>

<center>
    <div id="res">
    </div>
</center>
</body>
</html>
